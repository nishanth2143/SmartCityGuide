@model IEnumerable<AIeSCT.Web.ViewModels.ParkingPlaceViewModel>
@{
    ViewBag.Title = "ToggleState";
}

<h2>ToggleState</h2>
<style>
    .Green {
        color: green;
    }

    .Red {
        color: red;
    }
</style>

<div class="container">
    @foreach (var item in Model)
    {
        <div class="row">
            <div class="col-md-7"> @item.Name </div><div id=@item.Id class="col-md-5 glyphicon glyphicon-stop @(item.Availability? "Green":"Red")"></div>
        </div>
    }
</div>

@*@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>

    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>

    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            debugger;            

            var connection = $.hubConnection();
            var hub = connection.createHubProxy("ToggleState");
            hub.on("toggle", function (id, availability) {
                debugger;
                if (availability == true) {
                    $("#" + id).removeClass("Green");
                    $("#" + id).addClass("Red");
                }
                else
                {
                    $("#" + id).removeClass("Red");
                    $("#" + id).addClass("Green");
                }
            });

            connection.start();
        });

        function htmlEncode(value) {
            var encodedValue = $('<div />').text(value).html();
            return encodedValue;
        }
    </script>
}*@