@using AIeSCT.Web.Models;
@model IdealIntentResult

@{
    ViewBag.Title = "Results";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .Green{
        color: green;
    }
    .Red{
        color:red;
    }
</style>
<h2 class="text-center">Current Report for @Model.Intent</h2>
<div style="font-size:large">
Available <div class="glyphicon glyphicon-stop Green"></div>
Not Available <div class="glyphicon glyphicon-stop Red"></div>
</div>
<div class="row col-md-12" style="padding-top:100px">
@foreach (var item in Model.IdealResult) {
    <div class="row" style="font-size:large; margin-top:10px">
        <div class="row" style="margin-top:5px">
            <div class="col-md-2"><b> @item.Name</b> </div><div id=@item.Id class="col-md-1 glyphicon glyphicon-stop @(item.Availability? "Green":"Red")"></div><div class="col-md-3 text-right">Probability:</div><div class="col-md-2">@item.PredictionPerc %</div>
        </div>
        <div class="row" style="margin-top:15px">
            <div class="col-md-12">@item.Description</div>
        </div>
    </div>
    }
</div>

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>

    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>

    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            debugger;

            var connection = $.hubConnection();
            var hub = connection.createHubProxy("ToggleState");
            hub.on("toggle", function (id, availability) {
                debugger;
                if (availability == true) {
                    $("#" + id).removeClass("Green");
                    $("#" + id).addClass("Red");
                }
                else
                {
                    $("#" + id).removeClass("Red");
                    $("#" + id).addClass("Green");
                }
            });

            connection.start();
        });

    </script>
}
